<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>railsbridgedogs2</title>
<!-- 2015-02-19 Thu 16:11 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Clara" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">railsbridgedogs2</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. RAILSBRIDGE DOGS: Module II</a></li>
<li><a href="#sec-2">2. Datatypes</a>
<ul>
<li><a href="#sec-2-1">2.1. Now that we have a table full of dogs with names, we'd like to add some more information! Just having a list of names isn't that interesting. But we know lots of things about our dogs &#x2013; age, color, date they entered the shelter, whether or not they're fixed &#x2013; that we'd like to have available for our potential adopters.</a></li>
<li><a href="#sec-2-2">2.2. In this module, we will learn how to add fields to a database table, and we will learn a bit about the data types that are our options. A <span class="underline">data type</span> refers to the way we define the field in our database table, which indicates what kind of values can then be stored in that field. For example, when we named our dogs in the last module, we used the data type "string", which refers to anything that can be put in quotes (like "string" or "hello world" or "My, that's a cute dog you have there!"). But for things like age or shelter entrance date, an "integer" or "date" data type will be more appropriate.</a></li>
<li><a href="#sec-2-3">2.3. CODE:</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1. rails g migration AddAgeToDogs age:integer</a></li>
<li><a href="#sec-2-3-2">2.3.2. bundle exec rake db:migrate</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4. WHAT TO KNOW:</a>
<ul>
<li><a href="#sec-2-4-1">2.4.1. When we first generated our "dogs" table, we put "name:string" in our generating code &#x2013; this created for us a field in our "dogs" table called "name" that stores "string" values.</a></li>
<li><a href="#sec-2-4-2">2.4.2. A string is a common type of value used in programming &#x2013; a short amount of text that can be contained within quotes. So "Fido" is a string, "Hello World" is a string, "asdf!1!eleventyone" is a string.</a></li>
<li><a href="#sec-2-4-3">2.4.3. And an integer (as you may remember from math class) is any number without a fractional part &#x2013; e.g. 1, 0, 205, -53, etc.</a></li>
<li><a href="#sec-2-4-4">2.4.4. lists the data types that we can use in Rails migrations.</a></li>
</ul>
</li>
<li><a href="#sec-2-5">2.5. CODE:</a>
<ul>
<li><a href="#sec-2-5-1">2.5.1. edit /app/controllers/dogs<sub>controller</sub>.rb</a></li>
<li><a href="#sec-2-5-2">2.5.2. change params.require(:dog).permit(:name) to params.require(:dog).permit(:name, :age)</a></li>
</ul>
</li>
<li><a href="#sec-2-6">2.6. WHAT TO KNOW:</a>
<ul>
<li><a href="#sec-2-6-1">2.6.1. This is telling our controller code what parameters to accept for the "dog" object.</a></li>
<li><a href="#sec-2-6-2">2.6.2. This means that if we send part of the DogsController a request which asks to change or set a dog's "name" or "age", the controller will pass those along; but if we ask to change a dog's "admin<sub>status</sub>" or "fblrg", the controller will not allow this.</a></li>
<li><a href="#sec-2-6-3">2.6.3. Why is this important? Because it's easy for someone with bad intentions to send whatever parameters they want to our request. So we don't want to allow just arbitrary parameters to be set by request &#x2013; then malicious users could do things like send is<sub>admin</sub>=true when updating their own account, and gain access to everything!</a></li>
<li><a href="#sec-2-6-4">2.6.4. discusses how the latest versions of Rails handle parameters &#x2013; the default behavior is the most secure, i.e. not accepting any parameters not explicitly allowed in the code. So each time we add a new field to our model, if we want the existing "edit"/"new"/"update" code to accept input for that field, we need to add it to the permitted parameters.</a></li>
</ul>
</li>
<li><a href="#sec-2-7">2.7. CODE:</a>
<ul>
<li><a href="#sec-2-7-1">2.7.1. add to /app/views/dogs/<sub>form</sub>.html.erb</a></li>
<li><a href="#sec-2-7-2">2.7.2. &lt;div class="field"&gt;</a></li>
</ul>
</li>
<li><a href="#sec-2-8">2.8. WHAT TO KNOW:</a>
<ul>
<li><a href="#sec-2-8-1">2.8.1. Now, when you go to edit one of your dogs, you'll be able to set their age!</a></li>
<li><a href="#sec-2-8-2">2.8.2. number<sub>field</sub> is a Rails form helper; this creates a field that accepts numbers in the form the user sees in their browser.</a></li>
<li><a href="#sec-2-8-3">2.8.3. lists and explains the various form helpers available in Rails.</a></li>
</ul>
</li>
<li><a href="#sec-2-9">2.9. CODE:</a>
<ul>
<li><a href="#sec-2-9-1">2.9.1. edit /app/views/dogs/index.html.erb</a></li>
<li><a href="#sec-2-9-2">2.9.2. add &lt;th&gt;Age&lt;/th&gt;</a></li>
<li><a href="#sec-2-9-3">2.9.3. add &lt;td&gt;&lt;%= dog.age %&gt;&lt;/td&gt;</a></li>
</ul>
</li>
<li><a href="#sec-2-10">2.10. WHAT TO KNOW:</a>
<ul>
<li><a href="#sec-2-10-1">2.10.1. Now, we should be fully prepared to add ages to our dogs. Here's what we did:</a></li>
<li><a href="#sec-2-10-2">2.10.2. Go into your application and make sure you can add and view dogs' ages! (If you can't, review the above to see where you went wrong, and/or ask a TA.)</a></li>
<li><a href="#sec-2-10-3">2.10.3. Now is also a good time to git commit your changes and push to Heroku. [link to where we did this before]</a></li>
</ul>
</li>
<li><a href="#sec-2-11">2.11. MORE:</a>
<ul>
<li><a href="#sec-2-11-1">2.11.1. Next: learn about some other datatypes! See the link above.</a></li>
<li><a href="#sec-2-11-2">2.11.2. Try to choose the right datatypes for:</a></li>
<li><a href="#sec-2-11-3">2.11.3. Then, try to add those fields to your application, using the same steps we used to add age to our dogs; make sure you can edit each of these fields and see them listed on your homepage.</a></li>
<li><a href="#sec-2-11-4">2.11.4. Ask a TA or work with another student if you run into issues!</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> RAILSBRIDGE DOGS: Module II</h2>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Datatypes</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Now that we have a table full of dogs with names, we'd like to add some more information! Just having a list of names isn't that interesting. But we know lots of things about our dogs &#x2013; age, color, date they entered the shelter, whether or not they're fixed &#x2013; that we'd like to have available for our potential adopters.</h3>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> In this module, we will learn how to add fields to a database table, and we will learn a bit about the data types that are our options. A <span class="underline">data type</span> refers to the way we define the field in our database table, which indicates what kind of values can then be stored in that field. For example, when we named our dogs in the last module, we used the data type "string", which refers to anything that can be put in quotes (like "string" or "hello world" or "My, that's a cute dog you have there!"). But for things like age or shelter entrance date, an "integer" or "date" data type will be more appropriate.</h3>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> CODE:</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> rails g migration AddAgeToDogs age:integer</h4>
</div>
<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> bundle exec rake db:migrate</h4>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> WHAT TO KNOW:</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> When we first generated our "dogs" table, we put "name:string" in our generating code &#x2013; this created for us a field in our "dogs" table called "name" that stores "string" values.</h4>
</div>
<div id="outline-container-sec-2-4-2" class="outline-4">
<h4 id="sec-2-4-2"><span class="section-number-4">2.4.2</span> A string is a common type of value used in programming &#x2013; a short amount of text that can be contained within quotes. So "Fido" is a string, "Hello World" is a string, "asdf!1!eleventyone" is a string.</h4>
</div>
<div id="outline-container-sec-2-4-3" class="outline-4">
<h4 id="sec-2-4-3"><span class="section-number-4">2.4.3</span> And an integer (as you may remember from math class) is any number without a fractional part &#x2013; e.g. 1, 0, 205, -53, etc.</h4>
</div>
<div id="outline-container-sec-2-4-4" class="outline-4">
<h4 id="sec-2-4-4"><span class="section-number-4">2.4.4</span> <a href="http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column</a> lists the data types that we can use in Rails migrations.</h4>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> CODE:</h3>
<div class="outline-text-3" id="text-2-5">
</div><div id="outline-container-sec-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> edit /app/controllers/dogs<sub>controller</sub>.rb</h4>
</div>
<div id="outline-container-sec-2-5-2" class="outline-4">
<h4 id="sec-2-5-2"><span class="section-number-4">2.5.2</span> change params.require(:dog).permit(:name) to params.require(:dog).permit(:name, :age)</h4>
</div>
</div>
<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> WHAT TO KNOW:</h3>
<div class="outline-text-3" id="text-2-6">
</div><div id="outline-container-sec-2-6-1" class="outline-4">
<h4 id="sec-2-6-1"><span class="section-number-4">2.6.1</span> This is telling our controller code what parameters to accept for the "dog" object.</h4>
</div>
<div id="outline-container-sec-2-6-2" class="outline-4">
<h4 id="sec-2-6-2"><span class="section-number-4">2.6.2</span> This means that if we send part of the DogsController a request which asks to change or set a dog's "name" or "age", the controller will pass those along; but if we ask to change a dog's "admin<sub>status</sub>" or "fblrg", the controller will not allow this.</h4>
</div>
<div id="outline-container-sec-2-6-3" class="outline-4">
<h4 id="sec-2-6-3"><span class="section-number-4">2.6.3</span> Why is this important? Because it's easy for someone with bad intentions to send whatever parameters they want to our request. So we don't want to allow just arbitrary parameters to be set by request &#x2013; then malicious users could do things like send is<sub>admin</sub>=true when updating their own account, and gain access to everything!</h4>
</div>
<div id="outline-container-sec-2-6-4" class="outline-4">
<h4 id="sec-2-6-4"><span class="section-number-4">2.6.4</span> <a href="http://api.rubyonrails.org/classes/ActionController/Parameters.html">http://api.rubyonrails.org/classes/ActionController/Parameters.html</a> discusses how the latest versions of Rails handle parameters &#x2013; the default behavior is the most secure, i.e. not accepting any parameters not explicitly allowed in the code. So each time we add a new field to our model, if we want the existing "edit"/"new"/"update" code to accept input for that field, we need to add it to the permitted parameters.</h4>
</div>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> CODE:</h3>
<div class="outline-text-3" id="text-2-7">
</div><div id="outline-container-sec-2-7-1" class="outline-4">
<h4 id="sec-2-7-1"><span class="section-number-4">2.7.1</span> add to /app/views/dogs/<sub>form</sub>.html.erb</h4>
</div>
<div id="outline-container-sec-2-7-2" class="outline-4">
<h4 id="sec-2-7-2"><span class="section-number-4">2.7.2</span> &lt;div class="field"&gt;</h4>
<div class="outline-text-4" id="text-2-7-2">
<p>
  &lt;%= f.label :age %&gt;&lt;br&gt;nnn
  &lt;%= f.number<sub>field</sub> :age %&gt;
&lt;/div&gt;
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> WHAT TO KNOW:</h3>
<div class="outline-text-3" id="text-2-8">
</div><div id="outline-container-sec-2-8-1" class="outline-4">
<h4 id="sec-2-8-1"><span class="section-number-4">2.8.1</span> Now, when you go to edit one of your dogs, you'll be able to set their age!</h4>
</div>
<div id="outline-container-sec-2-8-2" class="outline-4">
<h4 id="sec-2-8-2"><span class="section-number-4">2.8.2</span> number<sub>field</sub> is a Rails form helper; this creates a field that accepts numbers in the form the user sees in their browser.</h4>
</div>
<div id="outline-container-sec-2-8-3" class="outline-4">
<h4 id="sec-2-8-3"><span class="section-number-4">2.8.3</span> <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html">http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html</a> lists and explains the various form helpers available in Rails.</h4>
</div>
</div>
<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> CODE:</h3>
<div class="outline-text-3" id="text-2-9">
</div><div id="outline-container-sec-2-9-1" class="outline-4">
<h4 id="sec-2-9-1"><span class="section-number-4">2.9.1</span> edit /app/views/dogs/index.html.erb</h4>
</div>
<div id="outline-container-sec-2-9-2" class="outline-4">
<h4 id="sec-2-9-2"><span class="section-number-4">2.9.2</span> add &lt;th&gt;Age&lt;/th&gt;</h4>
</div>
<div id="outline-container-sec-2-9-3" class="outline-4">
<h4 id="sec-2-9-3"><span class="section-number-4">2.9.3</span> add &lt;td&gt;&lt;%= dog.age %&gt;&lt;/td&gt;</h4>
</div>
</div>
<div id="outline-container-sec-2-10" class="outline-3">
<h3 id="sec-2-10"><span class="section-number-3">2.10</span> WHAT TO KNOW:</h3>
<div class="outline-text-3" id="text-2-10">
</div><div id="outline-container-sec-2-10-1" class="outline-4">
<h4 id="sec-2-10-1"><span class="section-number-4">2.10.1</span> Now, we should be fully prepared to add ages to our dogs. Here's what we did:</h4>
<div class="outline-text-4" id="text-2-10-1">
</div><ol class="org-ol"><li><a id="sec-2-10-1-1" name="sec-2-10-1-1"></a>add a field in the database to store the age<br  /></li>
<li><a id="sec-2-10-1-2" name="sec-2-10-1-2"></a>tell the controller to accept the :age parameter<br  /></li>
<li><a id="sec-2-10-1-3" name="sec-2-10-1-3"></a>add a field in the form where we can enter the age<br  /></li>
<li><a id="sec-2-10-1-4" name="sec-2-10-1-4"></a>add a field in the index to display the age<br  /></li></ol>
</div>
<div id="outline-container-sec-2-10-2" class="outline-4">
<h4 id="sec-2-10-2"><span class="section-number-4">2.10.2</span> Go into your application and make sure you can add and view dogs' ages! (If you can't, review the above to see where you went wrong, and/or ask a TA.)</h4>
</div>
<div id="outline-container-sec-2-10-3" class="outline-4">
<h4 id="sec-2-10-3"><span class="section-number-4">2.10.3</span> Now is also a good time to git commit your changes and push to Heroku. [link to where we did this before]</h4>
</div>
</div>
<div id="outline-container-sec-2-11" class="outline-3">
<h3 id="sec-2-11"><span class="section-number-3">2.11</span> MORE:</h3>
<div class="outline-text-3" id="text-2-11">
</div><div id="outline-container-sec-2-11-1" class="outline-4">
<h4 id="sec-2-11-1"><span class="section-number-4">2.11.1</span> Next: learn about some other datatypes! See the link above.</h4>
</div>
<div id="outline-container-sec-2-11-2" class="outline-4">
<h4 id="sec-2-11-2"><span class="section-number-4">2.11.2</span> Try to choose the right datatypes for:</h4>
<div class="outline-text-4" id="text-2-11-2">
</div><ol class="org-ol"><li><a id="sec-2-11-2-1" name="sec-2-11-2-1"></a>the date a dog arrived in the shelter<br  /></li>
<li><a id="sec-2-11-2-2" name="sec-2-11-2-2"></a>the color of the dog<br  /></li>
<li><a id="sec-2-11-2-3" name="sec-2-11-2-3"></a>a description of the dog's temperament<br  /></li>
<li><a id="sec-2-11-2-4" name="sec-2-11-2-4"></a>whether or not the dog is fixed<br  /></li></ol>
</div>
<div id="outline-container-sec-2-11-3" class="outline-4">
<h4 id="sec-2-11-3"><span class="section-number-4">2.11.3</span> Then, try to add those fields to your application, using the same steps we used to add age to our dogs; make sure you can edit each of these fields and see them listed on your homepage.</h4>
</div>
<div id="outline-container-sec-2-11-4" class="outline-4">
<h4 id="sec-2-11-4"><span class="section-number-4">2.11.4</span> Ask a TA or work with another student if you run into issues!</h4>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Clara</p>
<p class="date">Created: 2015-02-19 Thu 16:11</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
